#!/bin/bash
#--------------------------------------------------------------
#  TOPIC: Menu-Driven Permission Management Using chmod
#
#  WHAT IS THIS SCRIPT?
#  - A bash script to check and modify file/directory permissions.
#
#  WHAT OPERATIONS ARE SUPPORTED?
#    1. View current permissions (ls -l)
#    2. Give full permissions to everyone (chmod 777)
#    3. Give full permissions only to owner (chmod 700)
#    4. Remove all permissions from 'others' (chmod o-rwx)
#    5. Give read/write permissions only to owner (chmod 600)
#    6. Exit the menu
#
#  HOW IT WORKS?
#  - User enters filename/directory.
#  - Program checks if it exists.
#  - Shows a repeating menu to apply permission changes.
#--------------------------------------------------------------

read -p "Enter file/directory name: " fname   # Ask user for file or directory

# Check if file/directory exists
if [ ! -e "$fname" ]; then
    echo "Error: $fname does not exist!"
    exit 1
fi

while true; do                     # Infinite loop until user exits
    echo ""
    echo "========= PERMISSION MENU ========="
    echo "1. Check current permissions"
    echo "2. Give all permissions to all"
    echo "3. Give all permissions to user (owner)"
    echo "4. Remove all permissions from others"
    echo "5. Set read/write for user only"
    echo "6. Exit"
    echo "==================================="
    
    read -p "Enter your choice: " ch   # Read menu choice

    case $ch in
        1)
            echo "Current Permissions:"
            ls -l "$fname"            # Show owner/group/others permissions
            ;;
        2)
            chmod 777 "$fname"        # rwx for owner, group, others
            echo "All permissions given to all users (777)."
            ;;
        3)
            chmod 700 "$fname"        # rwx only for owner
            echo "All permissions given only to owner (700)."
            ;;
        4)
            chmod o-rwx "$fname"      # Remove all permissions from others
            echo "All permissions removed from other users."
            ;;
        5)
            chmod 600 "$fname"        # rw only for owner
            echo "Owner can read/write only (600)."
            ;;
        6)
            echo "Exiting program..."
            exit 0                    # Exit program
            ;;
        *)
            echo "Invalid choice. Enter 1–6."
            ;;
    esac
done

#--------------------------------------------------------------
# HOW TO CREATE AND RUN THIS SCRIPT
#
# 1. Create a new file:
#       nano perm_menu.sh
#
# 2. Paste the entire script into the editor.
#
# 3. Save the file:
#       Press  CTRL + O  → Enter
#       Press  CTRL + X  → Exit editor
#
# 4. Give execution permission:
#       chmod +x perm_menu.sh
#
# 5. Run the script:
#       ./perm_menu.sh
#
#--------------------------------------------------------------
